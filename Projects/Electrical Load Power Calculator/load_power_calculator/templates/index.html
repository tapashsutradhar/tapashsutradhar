<!DOCTYPE html>
<html>
<head>
    <title>Load Power Calculator</title>
    <style>
        body { font-family: Arial; margin: 40px; }
        input, select { margin: 5px; padding: 5px; }
        .result { margin-top: 20px; font-size: 1.1em; }
    </style>
</head>
<body>
    <h2>Electrical Load Power Calculator (Flask)</h2>
    <form method="POST">
        <label>Voltage (V):</label><input type="number" step="any" name="voltage" required><br>
        <label>Current (A):</label><input type="number" step="any" name="current" required><br>
        <label>Power Factor:</label><input type="number" step="any" name="pf" min="0" max="1" required><br>
        <label>Phase:</label>
        <select name="phase">
            <option value="single">Single-phase</option>
            <option value="three">Three-phase</option>
        </select><br>
        <input type="submit" value="Calculate">
    </form>

    {% if result %}
        <div class="result">
            {% if result.error %}
                <p style="color:red;">Error: {{ result.error }}</p>
            {% else %}
                <p>Real Power (P): {{ result['P (kW)'] }} kW</p>
                <p>Reactive Power (Q): {{ result['Q (kVAR)'] }} kVAR</p>
                <p>Apparent Power (S): {{ result['S (kVA)'] }} kVA</p>
                <img src="{{ url_for('static', filename='power_triangle.png') }}" alt="Power Triangle" width="400">
                <br><br>
                <a href="/export">ðŸ“¥ Export to CSV</a>
            {% endif %}
        </div>
    {% endif %}
</body>
</html>
